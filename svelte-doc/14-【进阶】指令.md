## use

  自定义 action

```

use:action={parameters}

```

  

```

action = (node: HTMLElement, parameters: any) => {

update?: (parameters: any) => void,

destroy?: () => void

}

```

  

use:clickoutside

```javascript
export const clickOutside = (node: HTMLElement, callback: () => void) => {
  const handleClick = (event: MouseEvent) => {
    if (!event?.target) return;

    if (
      node &&
      !node.contains(event.target as Node) &&
      !event.defaultPrevented
    ) {
      callback();
    }
  };

  document.addEventListener("click", handleClick, true);

  return {
    destroy() {
      document.removeEventListener("click", handleClick, true);
    },
  };
};
```

  

use:wave

  

以下指令在动画中详细讲解

  
## transition

transition:*fn*

  
## in / out

in: *fn* /out:*fn*

  
## animate

animate:*fn*

  
  



  

第三方库 todo参考示例，到时自己重写

```

export default function movable(node) {

let moving = false

let x, y, left, top

function handleMove(e) {

if (moving) {

node.style.left = (e.clientX - x + left) + 'px'

node.style.top = (e.clientY - y + top) + 'px'

}

}

function startMove(e) {

moving = true

x = e.clientX

y = e.clientY

left = parseInt(node.style.left) || 0

top = parseInt(node.style.top) || 0

}

function endMove() { moving = false }

window.addEventListener('mousemove', handleMove)

window.addEventListener('mouseup', endMove)

node.addEventListener('mousedown', startMove)

return {

destroy() {

window.removeEventListener('mousemove', handleMove)

window.removeEventListener('mouseup', endMove)

node.removeEventListener('mousedown', startMove)

}

}

}

```

  
  
在前面介绍插槽的章节中，我们了解到，在Svelte中并不能劫持`$$slots`来二次定义插槽的内容，那我们便可以使用指令的形式来完成这一操作。继续以实现Space组件的功能为例TODO 继续完善下列代码：
```javascript
export function space(node: HTMLElement, spaceClasses: string) {
  const wrap = () => {
    node.childNodes.forEach((element) => {
      if (!element) {
        return;
      }

      if (
        element.nodeType === 3 &&
        (!element.nodeValue || /^\s+$/.test(element.nodeValue))
      ) {
        return;
      }

      if (element.parentNode) {
        const wrapItem = document.createElement("div");

        wrapItem.className = spaceClasses;

        element.parentNode.insertBefore(wrapItem, element);

        wrapItem.appendChild(element);
      }
    });
  };

  wrap();

  return {
    destroy: wrap,
  };
}
```

## 小结