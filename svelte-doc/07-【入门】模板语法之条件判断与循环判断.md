
## 条件判断

```javascript
{#if condition}
	code
{:else if condition}
	code
{:else condition}
	code
{/if}
```

condition是我们要写的条件表达式，code则是页面的展示内容。其中`{:else if}`和`{:else}`是可选的。

```html
<script>
  let score = 0;
</script>

<input type="range" min="0" max="100" bind:value={score} />
分数{score}：
{#if score>=0 && score< 60}
  不及格
{:else if score>=60 && score < 80}
  良好
{:else}
  优秀
{/if}
```
![[test22.gif]]


## 循环判断

```javascript
{#each list as item, index (key))}
	code
{:else}
	code
{/each}
```

其中`{:else}`可选。else命中表示用于循环的数组为空数组。
```html
<script>
  let arr = [];

  const onAdd = () => {
    arr = [...arr, 1];
  }

  const onRemove = () => {
    arr.pop();
    arr = arr;
  }
</script>

<button on:click={onAdd}>add</button>
<button on:click={onRemove}>remove</button>
<ul>
  {#each arr as item}
    <li>{item}</li>
    {:else}
      No Data
  {/each}
</ul>
```

![[test23.gif]]

### 解构
可以对数组的每一项进行解构赋值。
```html
<script>
  let arr = [{
    name: 'Bob',
    age: 18
  }, {
    name: 'Carter',
    age: 19
  }]
</script>

{#each arr as { name, age }}
  <p>
    姓名：{name}，年龄：{age}
  </p>
{/each}
```
![[Pasted image 20240228144924.png]]

### key

```html
<script>
  export let bookName;

  const authors = {
    狂人日记: "鲁迅",
    骆驼祥子: "老舍",
    我与地坛: "史铁生",
    史记: "司马迁",
  };

  const author = authors[bookName];
</script>

<div>{bookName}：{author}</div>
```


```html
<script>
  import Book from "./Child.svelte";

  let books = [{
      id: 1,
      name: "狂人日记",
    },{
      id: 2,
      name: "骆驼祥子",
    },{
      id: 3,
      name: "我与地坛",
    },{
      id: 4,
      name: "史记",
    },
  ];

  const deleteBook = () => {
    books = books.slice(1);
  };
</script>

<button on:click={deleteBook}>删除第一项</button>

{#each books as item}
  <Book bookName={item.name} />
{/each}
```

当我们点击删除时，便会惊讶地看到，作者和书名对不上了！
![[test24.gif]]
如果读者感兴趣，可以把删除第一项的操作，改为往数组的第一项添加新项目，此类现象仍旧存在。

这时候便轮到我们的key派上用场。
```javascript
{#each list as item, index (key)}
或
{#each list as item (key)}
```

修改上述例子的代码
```html
...

{#each books as item (item.id)}
  <Book bookName={item.name} />
{/each}
```

![[test25.gif]]

当我们使用key时，需要确保key值的唯一。

TODO: 何时使用key
## 小结
可能刚开始读者朋友们记这些标签会偶尔搞混，这里笔者给大家总结了规律。开始以`#`，中间部分`:`，结尾`/`