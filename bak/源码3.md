src目录下compiler, runtime


src/runtime下的.indexts

```
export {
	onMount,
	onDestroy,
	beforeUpdate,
	afterUpdate,
	setContext,
	getContext,
	getAllContexts,
	hasContext,
	tick,
	createEventDispatcher,
	SvelteComponentDev as SvelteComponent,
	SvelteComponentTyped
	// additional exports added through generate-type-definitions.js
} from 'svelte/internal';
```

svelte/internal 其实就是src目录下的runtime/internal

先关注SvelteComponent

src/runtime/internal下的Component.ts

看一下repl的转义结果，组件继承SvelteComponent，在初始化时，会调用init方法

```
class App extends SvelteComponent {
	constructor(options) {
		super();
		init(this, options, null, create_fragment, safe_not_equal, {});
	}
}
```

重新回到Component.ts

我们了解一下init方法的各参数含义

```
export function init(component, options, instance, create_fragment, not_equal, props, append_styles, dirty = [-1]) {}
```

component即是当前组件

instance数据更新

create_fragment 创建dom


src/compiler/compile/index.ts

compiler 将svelte文件转成能在浏览器运行的js代码

三个关键步骤

```javascript
const ast = parse(source, options)
const component = new Component(
		ast,
		source,
		options.name || get_name_from_filename(options.filename) || 'Component',
		options,
		stats,
		warnings
	)
render_dom(component, options)
```

## parse

## Component

## render_dom
