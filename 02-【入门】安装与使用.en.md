## Install

Before installing `Svelte`, we recommend you to make the following things done:

- Install [Node.js](https://nodejs.org/en) environment.
- Install Code Editor（[VSCode](https://code.visualstudio.com/) recommended）
- Know something about Html, Css and JavaScript

### Installed via Vite（recommended）

After we have installed the Node environment, we can use [Vite](https://vitejs.dev/) to install. Because the use of Vite has a higher version of Node.js requirements, so I recommend that you install a relatively new Node.js. currently I use the version for `v18.15.0`.

![Node Version](./img/02-1.png)

If there are different projects relying on different versions of Node, I recommend installing a node versioning tool such as [nvm](https://github.com/nvm-sh/nvm).

  
Everything is ready, the installation command is as follows, which we execute in steps：
```bash
npm create vite@latest my-svelte-project -- --template svelte
cd my-svelte-project
npm install
```

First of all when we hit the line `npm create vite@latest my-svelte-project -- --template svelte` in the command line tool, wait for a moment and we can see:
![](./img/02-2.png)

The next step is to execute each of them as shown in the figure, execute `cd my-svelte-project` and `npm install`.

`cd my-svelte-project` takes you to the directory **my-svelte-project** that we just created successfully. Once in the directory, we run `npm install` to install all the dependencies needed by the project.

If you are better at using Typescript, then you can replace `--template svelte` with `--template svelte-ts`.

What if we execute the next line command（Can you tell the difference?）
```bash
npm create vite@latest my-svelte-app
```

That's right, we don't specify a template, that is, we don't specify which front-end library's template to use, so we get the following interface:

![](./img/02-3.png)

Since we are learning Svelte, then we can use the up and down arrow keys on the keyboard to check the Svelte option and enter;

In the next step, we select Javascript, and again, if you have mastered Typescript, you can select Typescript.

![](./img/02-4.png)

Enter and you get the same prompt you just did.

![](./img/02-5.png)

Again cd to the project directory and then execute install dependencies. After the `npm install` dependencies are installed, we run `npm run dev` to get our first Svelte project up and running.

In the code of the Github repository [create-vite](https://github.com/vitejs/vite/tree/main/packages/create-vite), we were able to find that what we downloaded is the file in the corresponding directory.

Visit `http://localhost:5173` and if you can see the same page as I did, then congratulations, you've successfully taken the first step!

### Original Installation

The original installation referred to here is actually the installation prompt that appears on the [home page](https://svelte.dev/) of the official website

```bash
npm create svelte@latest my-app
cd my-app
npm install
npm run dev -- --open
```

Run `npm create svelte@latest my-app`, it tells us to install `create-svelte`:
![](./img/02-6.png)

As you can see, the officially provided template is related to SvelteKit.

[SvelteKit](https://kit.svelte.dev/) is a framework for building web applications using Svelte.

The relationship between `Svelte` and `SvelteKit` is the same as `React` and `Next.js`, or `Vue` and `Nuxt.js`. The former is a UI framework, while the latter is a web framework written based on the former. Therefore, the official website recommended installation that is through the SvelteKit to install.

Let's choose one of the templates at random and enter to confirm.

![](./img/02-7.png)

Later will continue to provide some options, according to their own preferences after the selection, we can see the following interface:
![](./img/02-8.png)


### Customized Installation
假如我们不想使用Vite或者SvelteKit，亦或者我们没有条件使用这两者，那就需要我们自己集成Svelte的环境。在日常开发时，我们通常会使用[webpack](https://webpack.js.org/)或者[Rollup](https://rollupjs.org/)作为我们项目的模块管理打包工具。因此笔者会分别介绍这两种环境下，如何搭建Svelte的运行环境。

这里笔者假设读者朋友们，在创建了webpack demo项目或者rollup demo项目后，在目录下都能有以下文件：
![](./img/02-9.png)

App.svelte内内容随意，符合Svelte文件格式即可；

index.js的文件内容如下：
```javascript
import App from './App.svelte';

new App({
  target: document.querySelector('#root')
});
```

index.html的内容如下：
```html
<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Document</title>
</head>

<body>
  <div id="root"></div>
  <script src="./dist/index.js"></script>
  </body>
</html>
```
#### webpack

在webpack中使用Svelte，除了必不可少的svelte，另外一个关键则是安装[svelte-loader](https://github.com/sveltejs/svelte-loader)

```bash
mkdir webpack-demo
cd webpack-demo

npm init -y
npm install webpack webpack-cli -D
npm install babel-loader @babel/core -D
npm install svelte svelte-loader
```

安装完依赖后，修改webpack配置`webpack.config.js`：
```javascript
const path = require("path");

module.exports = {
  entry: "./src/index.js",
  output: {
    filename: "index.js",
    path: path.resolve(__dirname, "dist"),
  },
  resolve: {
    extensions: [".js", ".svelte"],
    conditionNames: ["svelte"],
  },
  module: {
    rules: [
      {
        test: /\.(js|ts)$/,
        use: [{ loader: "babel-loader" }],
      },
      {
        test: /\.(svelte)$/,
        use: [
          "babel-loader",
          {
            loader: "svelte-loader",
          },
        ],
      },
    ],
  },
};
```

如果在package.json中的scripts里约定了build命令，试着`npm run build`一下；亦或者直接在命令行中执行`webpack`命令，可以看到有个打包目录dist，index.html里引用的则是dist目录下的index.js文件。直接用浏览器打开index.html，便能看到定义在App.svelte里的内容。至于如何用`npm run dev`跑起来，以及支持热更新等操作，就留给读者朋友们自行探索了。

#### Rollup

在Rollup中的关键则是[rollup-plugin-svelte](https://github.com/sveltejs/rollup-plugin-svelte)

```javascript
import svelte from 'rollup-plugin-svelte';
import resolve from '@rollup/plugin-node-resolve';

export default {
  input: './src/index.js',
  output: {
    file: 'dist/index.js',
    format: 'umd'
  },
  plugins: [
    svelte(),
    resolve({
      browser: true,
      exportConditions: ['svelte'],
      extensions: ['.svelte']
    })
  ],
};
```
  
## 使用

经过上述一系列的安装教学，相信读者朋友们早就发现了如何在项目中使用Svelte。
首先在index.html文件内，提供一个可以挂载的节点，通常如下（读者可自行定义）：
```html
<div id="root"></div>
```

在入口文件index.js或main.js中，如下定义：
```javascript
import App from './App.svelte';

new App({
  target: document.querySelector('#root')
})
```

App.svelte则是我们初始的svelte文件，我们把App.svelte里写好的内容挂载到定义好的root节点上。

Svelte的文件以 `.svelte`作为文件后缀名，在文件内，与vue的template语法相似。

```html
<script>
//代码文件
</script>

<style>
/* 样式文件*/
</style>

<!-- 此处一般放置元素标签（多个或者为空） -->
```
文件内的script，style和html内容三个部分均为可选的，顺序也没有要求。

### VsCode Extension

我们用Vscode把安装好的项目打开，然后添加Svelte扩展。插件在我们编写svelte文件时，为我们提供语法高亮和智能检测。
![](./img/02-10.png)

### REPL

REPL（Read-Eval-Print Loop），是一个简单的交互式的编程环境。如果读者朋友们只是想简单学习下Svelte的语法，又觉得搭建一个Svelte环境项目太麻烦，那Svelte官网为开发者和学习者们提供了[REPL](https://svelte.dev/repl/hello-world?version=4.2.11)环境，在上面我们可以快速编写试验Svelte的各种api语法。

![repl](./img/02-11.png)

快速上手试试吧！

## 小结

本章我们学习了：
- 使用Vite安装Svelte
- 使用SvelteKit安装Svelte
- 在webpack项目中运行Svelte
- 在Rollup项目中运行Svelte
- Svelte单文件的内容格式
- 使用Svelte时会用到的辅助工具：VsCode插件、REPL运行环境等。
